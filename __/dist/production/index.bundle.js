!function(t,e){for(var n in e)t[n]=e[n]}(this,function(n){var s={};function i(t){if(s[t])return s[t].exports;var e=s[t]={i:t,l:!1,exports:{}};return n[t].call(e.exports,e,e.exports,i),e.l=!0,e.exports}return i.m=n,i.c=s,i.d=function(t,e,n){i.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},i.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},i.t=function(e,t){if(1&t&&(e=i(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(i.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var s in e)i.d(n,s,function(t){return e[t]}.bind(null,s));return n},i.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return i.d(e,"a",e),e},i.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},i.p="",i(i.s=7)}([function(t,e){!function(){t.exports=this.React}()},function(t,e,n){var s=znui.React||n(0),i=n(8),r=s.createClass({displayName:"FormItem",getDefaultProps:function(){return{disabled:!1,required:!0}},getInitialState:function(){return{status:"default",value:this.props.value,errorMessage:null}},componentWillUnmount:function(){this._timeout&&window.clearTimeout(this._timeout)},setValue:function(t,e){this.setState({value:t,text:e})},getValue:function(){return this.state.value},validate:function(t){var e=this.state.value;if(!this.props.required||""!==e&&null!=e){if(!1!==(t&&t(e,this)))return this.setState({status:"success",errorMessage:null}),this._timeout=window.setTimeout(function(){this.__isMounted&&this.setState&&this.setState({status:"default"})}.bind(this),1e3),e;this.setState({status:"error",errorMessage:this.props.error})}else this.setState({status:"error",errorMessage:this.props.error||"The field is required."})},__onInputChange:function(t,e){if((t.formitem=this).state.value=t.value,!1===(this.props.onChange&&this.props.onChange(t,e,this)))return!1;this.props.onInputChange&&this.props.onInputChange(t,e,this)},__onInputEnter:function(t,e){if((t.formitem=this).state.value=t.value,!1===(this.props.onEnter&&this.props.onEnter(t,e,this)))return!1;this.props.onInputEnter&&this.props.onInputEnter(t,e,this)},__renderHeader:function(){return s.createElement("div",{className:"zrfi-header"},this.props.icon&&s.createElement(i.SVGIcon,{icon:this.props.icon}),this.props.label&&s.createElement("div",{className:"title"},this.props.label))},__renderBody:function(){var t=zn.extend({},this.props,{className:znui.react.classname("body-input",this.props.inputClassName),value:this.state.value,text:this.state.text,onChange:this.__onInputChange,onEnter:this.__onInputEnter}),e=znui.react.createReactElement(this.props.input,t);return s.createElement("div",{className:"zrfi-body","data-zr-popup-tooltip":this.state.errorMessage},e,this.props.suffix&&s.createElement("span",{className:"suffix"},this.props.suffix))},render:function(){return s.createElement("div",{style:this.props.style,className:znui.react.classname("zr-form-item",this.props.className),"data-disabled":this.props.disabled,"data-required":this.props.required,"data-layout":this.props.layout,"data-size":this.props.size,"data-status":this.state.status},this.__renderHeader(),this.__renderBody())}});t.exports=r},function(t,e,n){function s(){return(s=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(t[s]=n[s])}return t}).apply(this,arguments)}var i=znui.React||n(0),r=n(1),a=n(5);t.exports=i.createClass({displayName:"ZRFormGroup",getInitialState:function(){return{loading:!0}},__itemRender:function(t,e){var n=this.props.itemRender&&this.props.itemRender(t,e);return null===n&&(n=i.createElement(r,s({},t,{key:e}))),n},__onLoading:function(){this.setState({loading:!0})},__onFinished:function(){this.setState({loading:!1})},render:function(){return i.createElement("div",{className:znui.react.classname("zr-form-group",this.props.className),style:znui.react.style(this.props.style)},i.createElement(znui.react.DataView,s({},this.props,{itemRender:this.__itemRender,onLoading:this.__onLoading,onFinished:this.__onFinished})),this.state.loading&&i.createElement(a.Loader,{content:"...",loader:"circle",size:"size-smail",layout:"flex-row"}))}})},function(t,e,n){function s(){return(s=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(t[s]=n[s])}return t}).apply(this,arguments)}var i=znui.React||n(0),r=n(9);t.exports=i.createClass({displayName:"ZRFormButtons",__buttonClick:function(t,e){switch(t.data.type){case"reset":this.props.onReset&&this.props.onReset(t,e);break;case"submit":this.props.onSubmit&&this.props.onSubmit(t,e);break;case"cancel":this.props.onCancel&&this.props.onCancel(t,e);break;default:this.props.onClick&&this.props.onClick(t,e)}},render:function(){return i.createElement(r.Buttons,s({},this.props,{className:znui.react.classname("zr-form-buttons",this.props.className),style:this.props.style,onClick:this.__buttonClick}))}})},function(module,exports,__webpack_require__){function _extends(){return(_extends=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(t[s]=n[s])}return t}).apply(this,arguments)}var React=znui.React||__webpack_require__(0),FormItem=__webpack_require__(1),FormGroup=__webpack_require__(2),FormButtons=__webpack_require__(3);module.exports=React.createClass({displayName:"ZRAjaxForm",getDefaultProps:function(){return{action:null,method:"post",noValidate:null,encType:"multipart/form-data",buttons:[{value:"取消",type:"cancel",icon:"faTimes"},{value:"提交",type:"submit",icon:"faHandPointUp"}]}},getInitialState:function(){return{submitting:!1,hiddens:{},data:{},refs:{}}},componentDidMount:function(){this.__initValue()},__initValue:function(){var t=this.props.value;t&&(t.__api__?this.__initApiValue(t):this.__initObjectValue(t))},__initApiValue:function(t){var e=this.props.events||{},n=e.before,s=e.after;this.state.data=zn.data.create(t,zn.extend(e,{before:function(t,e){this.setState({submitting:!0}),this.props.onValueLoading&&this.props.onValueLoading(e,this),n&&n(t,e)}.bind(this),after:function(t,e){this.setState({submitting:!1}),this.setValue(e),this.props.onValueFinished&&this.props.onValueFinished(e,this),s&&s(t,e)}.bind(this)}),this.props.context)},__initObjectValue:function(t){this.props.onValueLoading&&this.props.onValueLoading(t,this),this.setValue(t),this.props.onValueFinished&&this.props.onValueFinished(t,this)},cancel:function(){this.props.onCancel&&this.props.onCancel(this)},reset:function(){this.setState({submitting:!1,hiddens:{}});var t=this.refs,e=null;for(var n in t)(e=t[n])&&e.reset();return this},__onReset:function(){this.props.onReset&&this.props.onReset()},getValue:function(){var t=this.validate();if(!t)return!1;if(t=zn.extend(t,this.state.hiddens),t=zn.extend(t,this.props.hiddens),this.props.merge){var e={};e[this.props.merge]=t,t=e}return zn.extend(t,this.props.exts),t},setValue:function(i){if(!i)return this;if(i.__api__)return this.state.data.call(i),this;if(zn.is(i,"object")){for(var t in this.state.hiddens)this.state.hiddens[t]=i[t]||this.state.hiddens[t];var r=this.refs;setTimeout(function(){var t=null,e=null,n=null;for(var s in r)(t=r[s])&&(e=i[s],n=i[s+"_convert"],null!==e&&t.setValue(e,n))},0)}},submit:function(){var t=this.getValue();if(!t)return!1;var e=this.props.onSubmitBefore&&this.props.onSubmitBefore(t,this);if(!1===e)return!1;t=e||t;var n=zn.extend({url:this.props.action,method:this.props.method},this.props.submitApi),s="get"==(this.props.method||n.method||"post").toLocaleLowerCase()?"params":"data";if(n[s]||(n[s]={}),zn.extend(n[s],t),!n.url||!n[s])return!1;this.state.submit?this.state.submit.call(n):this.state.submit=zn.data.create(n,{before:function(t,e){this.setState({submitting:!0}),this.props.onSubmiting&&this.props.onSubmiting(e,this)}.bind(this),after:function(t,e){this.setState({submitting:!1}),this.props.onSubmited&&this.props.onSubmited(e,this)}.bind(this),error:function(t,e){this.props.onSubmitError&&this.props.onSubmitError(e,this)}.bind(this)},this.props.context)},__onSubmit:function(){if(!1===(this.props.onSubmit&&this.props.onSubmit()))return!1},validate:function(t){var e=this.state.refs,n=null,s={},i=this.props.noValidate,r=null;for(var a in e)if(n=e[a]){if(!i&&n.validate&&!n.validate(t))return!1;if(n.getValue&&(r=n.getValue(t)),!1===r)return!1;null!==r&&(s[n.props.valueKey||a]=r)}return s},__parseItemValue:function __parseItemValue(value){return 0==value.indexOf("javascript:")?eval(value):value},__onItemInputChange:function(t,e,n){n.validate();this.props.onItemInputChange&&this.props.onItemInputChange(t,e,n)},__itemRender:function(e,t){var n=this;return"ZRHidden"==e.type?(this.state.hiddens[e.name]=null!=e.value?this.__parseItemValue(e.value):null,null):React.createElement(FormItem,_extends({},e,{key:t,ref:function(t){return n.state.refs[e.name]=t},onInputChange:this.__onItemInputChange,onInputEnter:this.submit}))},__renderItems:function(){return React.createElement(FormGroup,{data:this.props.data,itemRender:this.__itemRender})},__renderGroups:function(){return this.props.groups?React.createElement("div",{className:"groups"},this.props.groups.map(function(t){return React.createElement(FormGroup,_extends({},t,{itemRender:this.__itemRender}))}.bind(this))):null},__renderButtons:function(){return this.props.buttons?React.createElement(FormButtons,{data:this.props.buttons,onSubmit:this.submit,onReset:this.reset,onCancel:this.cancel}):null},render:function(){return this.state.hiddens={},React.createElement("div",{style:znui.react.style(this.props.style),className:znui.react.classname("zr-form zr-ajax-form",this.props.className)},this.__renderItems(),this.__renderGroups(),this.__renderButtons(),this.state.submitting&&React.createElement("div",{className:"zr-form-loader"},React.createElement("span",{className:"loader"}),React.createElement("span",{className:"text"},"Submitting ...")))}})},function(t,e){!function(){t.exports=this.loader}()},function(t,e,n){function s(){return(s=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(t[s]=n[s])}return t}).apply(this,arguments)}var i=znui.React||n(0),r=znui.ReactDOM||n(11),a=n(1),o=n(2),u=n(3);n(5);t.exports=i.createClass({displayName:"ZRNativeForm",getDefaultProps:function(){return{action:null,autoComplete:"off",method:"post",name:null,noValidate:null,target:"_self",encType:"multipart/form-data"}},getInitialState:function(){return{submitting:!1,value:{}}},componentDidMount:function(){this.__initValue()},__initValue:function(){var t=this.props.value;t&&(t.__api__?this.__initApiValue(t):this.__initObjectValue(t))},__initApiValue:function(t){var e=this.props.events||{},n=e.before,s=e.after;this.state.data=zn.data.create(t,zn.extend(e,{before:function(t,e){this.setState({submitting:!0}),this.props.onValueLoading&&this.props.onValueLoading(e,this),n&&n(t,e)}.bind(this),after:function(t,e){this.setState({submitting:!1,value:e}),this.props.onValueFinished&&this.props.onValueFinished(e,this),s&&s(t,e)}.bind(this)}),this.props.context)},__initObjectValue:function(t){this.props.onValueLoading&&this.props.onValueLoading(t,this),this.setState({value:t}),this.props.onValueFinished&&this.props.onValueFinished(t,this)},cancel:function(){},reset:function(){this.setState({submitting:!1,value:{}}),r.findDOMNode(this).reset()},__onReset:function(){this.props.onReset&&this.props.onReset()},submit:function(){this.setState({submitting:!0})},__onSubmit:function(t){if(!1===(this.props.onSubmit&&this.props.onSubmit(t,this)))return!1},validate:function(){},__onItemChange:function(){this.props.onItemChange&&this.props.onItemChange()},__onItemInputChange:function(){this.props.onItemInputChange&&this.props.onItemInputChange()},__itemRender:function(t,e){return i.createElement(a,s({key:e},t,{value:this.state.value[t.name],text:this.state.value[t.name+"_convert"],onChange:this.__onItemChange,onInputChange:this.__onItemInputChange}))},__renderItems:function(){return i.createElement(o,{data:this.props.data,itemRender:this.__itemRender})},__renderGroups:function(){var t=this.props.groups||[];return t.length?i.createElement("div",{className:"groups"},t.map(function(t){return i.createElement(o,s({},t,{itemRender:this.__itemRender}))}.bind(this))):null},__renderButtons:function(){return this.props.buttons?i.createElement(u,{data:this.props.buttons,onSubmit:this.submit,onReset:this.reset,onCancel:this.cancel}):null},render:function(){var n=this.props.hiddens||{};return i.createElement("form",{style:znui.react.style(this.props.style),className:znui.react.classname("zr-form zr-native-form",this.props.className),action:this.props.action,autoComplete:this.props.autoComplete,method:this.props.method,name:this.props.name,noValidate:this.props.noValidate,target:this.props.target,encType:this.props.encType,onReset:this.__onReset,onSubmit:this.__onSubmit},Object.keys(n).map(function(t,e){return i.createElement("input",{key:"hidden_"+t,type:"hidden",name:t,value:n[t]})}),this.__renderItems(),this.__renderGroups(),this.__renderButtons(),this.state.submitting&&i.createElement("div",{className:"zr-form-loader"},i.createElement("span",{className:"loader"}),i.createElement("span",{className:"text"},"Submitting ...")))}})},function(t,e,n){t.exports={AjaxForm:n(4),Form:n(10),FormButtons:n(3),FormGroup:n(2),FormItem:n(1),FormTitle:n(12),NativeForm:n(6)}},function(t,e){!function(){t.exports=this.icon}()},function(t,e){!function(){t.exports=this.button}()},function(t,e,n){var s=znui.React||n(0),i=n(4),r=n(6);t.exports=s.createClass({displayName:"ZRForm",render:function(){return"Native"==this.props.type?s.createElement(r,this.props):s.createElement(i,this.props)}})},function(t,e){!function(){t.exports=this.ReactDOM}()},function(t,e,n){var s=znui.React||n(0);t.exports=s.createClass({displayName:"ZRFormTitle",getValue:function(){return null},setValue:function(){return this},render:function(){return s.createElement("div",{className:znui.react.classname("zr-form-title",this.props.className),style:this.props.style},s.createElement("span",{className:"zf-title"},this.props.title))}})}]));